<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>用戶中心</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div>
      <a href="{{url_for('user.register')}}">註冊</a
      >  <a href="{{url_for('user.login')}}">登陸</a>  <a href="">退出</a>
    </div>
    <div>
      <h1>所有用戶信息如下：</h1>
      搜索：<input type="text" name="search" placeholder="輸入搜索用戶名或手機號碼"/> <input type="button" value="搜索" id="search">
      {% if users %}
      <table border="1" cellspacing="0" width="80%">
        <tr>
          <th>序號</th>
          <th>用戶名</th>
          <th>手機號</th>
          <th>註冊時間</th>
          <th>操作</th>
        {% for user in users %}
        <tr>
          <th>{{loop.index}}</th>
          <th>{{user.username}}</th>
          <th>{{user.phone}}</th>
          <th>{{user.rdatetime}}</th>
          <th><a href="{{url_for('user.update')}}?id={{user.id}}">更新</a>
              <a href="{{url_for('user.delete')}}?id={{user.id}}">刪除</a></th>
        </tr>
        {% endfor %}
          {% else %}
          <p style="color: red; font-size: 20px">當前還沒有任何用戶</p>
          {% endif %}
        </tr>
      </table>
    </div>
    <script>
      $("#search").click(function(){
        let content = $("input[name='search']").val()
        location.href="{{url_for('user.search')}}?search="+content
        //http://127.0.0.1:5000/search?search=A
      })
    </script>
  </body>
</html>
